<!-- 
 ____  _       _            _    ___  _  _   
|  _ \| |     | |          | |  / _ \| || |  
| |_) | | __ _| | _____  __| | | (_) | || |_ 
|  _ <| |/ _` | |/ / _ \/ _` |  > _ <|__   _|
| |_) | | (_| |   <  __/ (_| | | (_) |  | |  
|____/|_|\__,_|_|\_\___|\__,_|  \___/   |_| 

2012

v:beta1
 -->

<html manifest="cache.manifest">


<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="style.css" media="screen" /></head>
	<script src="OfflineLocal.js"></script>
	<script src="config.js"></script>

<body onload=" onload()" onKeyPress="boutona(event)" onclic="saveData()">


<div class="cnt">
	<table id="liste">
		
		
	</table>
	<div id='classement'>
	test
	</div>

	<a class="edit btn" onclick="reset();"> Reset </a>
</div>
<br />
<span><center>code & design by Blaked 84me211</center></span>
<span><center><a href="https://github.com/Blaked84/s-p-c"> GitHub</a></center></span>


<script type="text/javascript">
	//var nj = prompt("Nombre de joueurs");
	//tableau des lettres

	var lettres= {};

	lettres[1]='a';
	lettres[2]='z';
	lettres[3]='e';
	lettres[4]='r';
	lettres[5]='t';
	lettres[6]='y';
	lettres[7]='u';
	lettres[8]='i';
	lettres[9]='o';
	lettres[10]='p';
	lettres[11]='q';
	lettres[12]='s';
	lettres[13]='d';
	lettres[14]='f';
	lettres[15]='g';
	lettres[16]='h';
	lettres[17]='j';
	lettres[18]='k';


	//var listelettres={"a","z","e","r","t","y","u","o","p","q","s","d","f","g","h","j","k"};

	var base={};

	for (var i = 1; i<19; i++){
		base[i]=i;
	}

	var cnt = {};
	var joueurs_equipe = {};
	for (var i = 1; i <nombre_equipes; i++) {
		cnt[i]=0;
		joueurs_equipe[i]=1;	
	}
	init_ui(base);
	function init_ui(liste){
		for (var i = 1; i < nombre_equipes-1; i++) {
			var k = liste[i];
			new_team(k);
		};
		
	}
	// génération de l'interface
	function new_team(id){ 
		// tr
		var tr = document.createElement('tr');
		tr.id = 'tr'+id;
		document.getElementById('liste').appendChild(tr);
		// td
		new_td();
		//bouton +
		var new_bp = document.createElement('a');
		new_bp.className="add btn";
		new_bp.setAttribute('onclick','cnt['+ id + ']=p1(1,'+ id +')');
		new_bp.href="#";
		var newLinkTextp = document.createTextNode("+");
		new_bp.appendChild(newLinkTextp);
		document.getElementById(tr.id ).lastChild.appendChild(new_bp) ;
		//td
		new_td();
		// bouton -
		var new_bm = document.createElement('a');
		new_bm.className="light btn";
		new_bm.setAttribute('onclick','cnt['+ id + ']=p1(-1,'+ id +')');
		new_bm.href="#";
		var newLinkTextm = document.createTextNode("-");
		new_bm.appendChild(newLinkTextm);
		document.getElementById(tr.id ).lastChild.appendChild(new_bm) ;
		//td
		new_td();
		// nom equipe
		var nom_equipe = document.createTextNode('Equipe ' + lettres[id]);
		document.getElementById(tr.id ).lastChild.appendChild(nom_equipe) ;
		//td
		new_td();
		// input
		var new_in = document.createElement('input');
		new_in.type="text";
		new_in.id='i'+id;
		new_in.value="1";
		document.getElementById(tr.id ).lastChild.appendChild(new_in) ;
		//td
		new_td();
		new_div('e'+id,"re");
		//td
		new_td();
		new_div('n'+id,"rn");

	}
	function new_td(){
		var td = document.createElement('td');
		document.getElementById('liste').lastChild.appendChild(td);
	}
	function new_div(id,cla){
		var div = document.createElement('div');
		var zero = document.createTextNode('0');

		div.id=id;
		div.className=cla;
		div.appendChild(zero);
		document.getElementById('liste').lastChild.lastChild.appendChild(div);
	}
	// fin generation interface 


	function p1(increment,i_){
		//var a = increment;
		cnt[i_] =parseInt( cnt[i_])+increment;
		var c ='e'+i_;
		var f = 'i' + i_;
		var g = 'n'+ i_;

		joueurs_equipe[i_] =document.getElementById(f).value;
		var q_per_p = Math.round( cnt[i_] /  joueurs_equipe[i_]*100)/100;
		document.getElementById(c).innerHTML=cnt[i_];
		document.getElementById(g).innerHTML=q_per_p;

		// classement
		//var classement
		//var premier= Math.max(cnt);
	
		
		var max =0;

		// tracé du graph
		for (var i = nombre_equipes; i >= 1; i--) {
				if (cnt[i]>max) {
					max=cnt[i];
					
				}


		}
		//var nouvel_ordre=classement(cnt);
		//reset_ui();
		//init_ui(base);

		for (t=1; t<nombre_equipes-1; t++){
			var c = 'e'+t
			graph(c,cnt[t],max);
		}
		
		//document.getElementById('classement').innerHTML=equip_maxi ;
		
		
		//alert(maxi);
		
		
		saveData();
		
		return cnt[i_];

	}
	function graph(div,cnt,cntmax){
		var largeur = cnt/cntmax *300 + 20;
		document.getElementById(div).style.width= largeur + 'px';
	}
	function reset_ui(){
		document.getElementById("liste").innerHTML="";
	}

	function classement(liste){
		var maxi=0;
		var cnt_temp=liste;
		var i_max = 0;
		var cnt_ordon ={};
		var n_cnt_ordon = {};
		for (var j = 1; j <nombre_equipes; j++) {
			for (var i = 1; i <nombre_equipes; i++) {

				if (cnt_temp[i]>maxi) {
							maxi=cnt_temp[i];
							i_max=i;
							
				}

			}
			cnt_temp[i_max]=0;

			maxi=0;
			n_cnt_ordon[j]= i_max;

			
		}


		
		return n_cnt_ordon;
	}

	function reset(){
	for(var i=1; i<window.localStorage.length;i++)
		{
		var vari = 'i'+i;
		var vare = 'e'+i;

		window.localStorage.setItem(i, 0);
		window.localStorage.setItem(vari, 1);
		document.getElementById(vare).innerHTML ="0";
		document.getElementById(vari).innerHTML ="1";
		

		}
	var e1 =0;
	var e2 =0;
	var e3 =0;
	
	alert('clique sur ok et puis F5');
	
	//document.getElementById("e2").innerHTML ="0";
	//document.getElementById("e3").innerHTML ="0";
	}



	// gestion clavier


	function r2(equip){
		equip +=1;
		idelem = '"'+equip+"'";
		document.getElementById("e2").innerHTML=equip;
		//alert(a);
		//alert('coucou');
		a="equip";
		
		return equip;

	}
</script>

<script>



function boutona(e){
	var touche = (window.Event) ? e.which : e.keyCode;
	for(var ib=1; ib<26; ib++){
		if (String.fromCharCode(touche)==lettres[ib])
			{
				javascript:cnt[ib]=p1(1,ib);
			}

	}
	saveData();
}
document.boutona;
</script>
</body>
</html>

